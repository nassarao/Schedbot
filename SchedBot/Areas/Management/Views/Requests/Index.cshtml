@model SchedBot.Areas.Management.Models.RequestViewModel

@{
    ViewBag.Title = "Requests";
    ViewBag.Current = "Requests";
}

<link href="~/Content/daterangepicker.min.css" rel="stylesheet" type="text/css" />

<div>
    <div class="col-md-12 col-sm-12 margin-bottom-20">
        <button class="btn green-meadow btn-outline sbold" id="newRequest"><i class="fa fa-plus"></i>&nbsp; New Request</button>
    </div>
<div class="col-md-12">
    <div id='newRequest' class='modal fade in' data-toggle="modal" data-target="#requestNewModal">
    </div>
    <div class="portlet light portlet-fit">
        <div class="portlet-title">
            <div class="caption font-schedBot">
                <span>Requests</span>
            </div>
        </div>
        <div class="portlet-body table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th class="col-md-2">Type</th>
                        <th class="col-md-5">Employee(s)</th>
                        <th class="col-md-2">Status</th>
                        <th class="col-md-1 text-center">Approve</th>
                        <th class="col-md-1 text-center">Deny</th>
                        <th class="col-md-1 text-center">Details</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Requests)
                    {
                        <td></td>
                    }
                    @*<tr>
                        <td class="col-md-2">Trade</td>
                        <td class="col-md-5">Andrew <i class="fa fa-lg fa-exchange"></i> Ahmad</td>
                        <td class="col-md-2">Pending</td>
                        <td class="col-md-1 text-center"><a href="#" id="requestApprove" class="font-dark"><i class="fa fa-2x fa-check"></i></a></td>
                        <td class="col-md-1 text-center"><a href="#" id="requestDeny" class="font-dark"><i class="fa fa-2x fa-times"></i></a></td>
                        <td class="col-md-1 text-center"><a href="#" id="requestDetails" class="font-dark"><i class="fa fa-2x fa-commenting-o"></i></a></td>
                    </tr>
                    <tr>
                        <td class="col-md-2">Time Off</td>
                        <td class="col-md-5">Adam</td>
                        <td class="col-md-2">Approved</td>
                        <td class="col-md-1 text-center"><a href="#" class="bg-font-grey-steel disabled-link" disabled><i class="disabled fa fa-2x fa-check"></i></a></td>
                        <td class="col-md-1 text-center"><a href="#" class="bg-font-grey-steel disabled-link" ><i class="fa fa-2x fa-times"></i></a></td>
                        <td class="col-md-1 text-center"><a href="#" class="font-dark"><i class="fa fa-2x fa-commenting-o"></i></a></td>
                    </tr>*@
                </tbody>
            </table>
        </div>
    </div>
    <div id='requestDetails' class='modal fade in' data-toggle="modal" data-target="#requestDetailsModal">
    </div>
    <div id='requestDeny' class='modal fade in' data-toggle="modal" data-target="#requestDenyModal">
    </div>
    <div id='requestApprove' class='modal fade in' data-toggle="modal" data-target="#requestApproveModal">
    </div>
</div>

    @Html.Partial("RequestDetailsModalPartial")

    <!-- ************************************* Deny Modal ***************************************** -->

    @Html.Partial("DenyModalPartial")

    <!-- ************************************* Request Deny End ***************************************** -->
    <!-- ************************************* Approve Modal ***************************************** -->

   @Html.Partial("ApproveModalPartial")

    <!-- ************************************* Request Approve End ***************************************** -->
    <!-- ************************************* New Request Modal ***************************************** -->

    @Html.Partial("NewRequestModal")

</div>


@*@Scripts.Render("~/bundles/jquery")*@

<script src="~/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
<script src="~/Scripts/moment.min.js" type="text/javascript"></script>
<script src="~/Scripts/daterangepicker2.js" type="text/javascript"></script>
<script>


    $('input[name="daterange"]').daterangepicker();
    $('button[name="daterange"]').click(function () {
        $('input[name="daterange"]').trigger("click");
    });

    $(document).ready(function () {

        

        $('#newRequest').click(function () {

            console.info("made inside new request click");
            $('#requestNewModal').modal('show');
            
        });

        $('#requestApprove').click(function () {

            console.info("made inside new request click");
            $('#requestApproveModal').modal('show');

        });

        $('#requestDeny').click(function () {

            console.info("made inside new request click");
            $('#requestDenyModal').modal('show');

        });

        $('#requestDetails').click(function () {

            console.info("made inside new request click");
            $('#requestDetailsModal').modal('show');

        });


        $("#timeOffRange").hide();



        $(document).on("change", "#newRequestType", function () {

            var requestType = $("#newRequestType").val();
            var dynamicHTML = {};

            if (requestType == "trade") {
                dynamicHTML = '   <div>  ' +
 '                               <div class="form-group">  ' +
 '                                   <div class="col-md-4">  ' +
 '                                       <label class="control-label">Current Shift:</label>  ' +
 '                                   </div>  ' +
 '                                   <div class="col-md-8 no-padding">  ' +
 '                                       <div class="col-md-12 no-padding">  ' +
 '                                           <select class="form-control" id="newRequestCurrentShift">  ' +
 '                                               <option value selected disabled></option>  ' +
 '                                               <option value="Mon">Mon</option>  ' +
 '                                               <option value="Tues">Tues</option>  ' +
 '                                           </select>  ' +
 '                                       </div>  ' +
 '     ' +
 '                                   </div>  ' +
 '                               </div>  ' +
 '                           </div>  ' +
 '     ' +
 '                           <div>  ' +
 '                               <div class="form-group">  ' +
 '                                   <div class="col-md-4">  ' +
 '                                       <label class="control-label">Employee to Trade:</label>  ' +
 '                                   </div>  ' +
 '                                   <div class="col-md-8 no-padding">  ' +
 '                                       <div class="col-md-12 no-padding">  ' +
 '                                           <select class="form-control" id="newRequestEmployeeToTrade">  ' +
 '                                               <option value selected disabled></option>  ' +
 '                                               <option value="Ahmad">Ahmad</option>  ' +
 '                                               <option value="Adam">Adam</option>  ' +
 '                                           </select>  ' +
 '                                       </div>  ' +
 '     ' +
 '                                   </div>  ' +
 '                               </div>  ' +
 '                           </div>  ' +
 '                           <div>  ' +
 '                               <div class="form-group">  ' +
 '                                   <div class="col-md-4">  ' +
 '                                       <label class="control-label">Shift To Trade For:</label>  ' +
 '                                   </div>  ' +
 '                                   <div class="col-md-8 no-padding">  ' +
 '                                       <div class="col-md-12 no-padding">  ' +
 '                                           <select class="form-control" id="newRequestTradeForShift">  ' +
 '                                               <option value selected disabled></option>  ' +
 '                                               <option value="Mon">Mon (Shift Hours)</option>  ' +
 '                                               <option value="Tues">Tues (Shift Hours)</option>  ' +
 '                                           </select>  ' +
 '                                       </div>  ' +
 '     ' +
 '                                   </div>  ' +
 '                               </div>  ' +
 '                          </div>  ';
                $("#newRequestHTML").html(dynamicHTML);
                $("#timeOffRange").hide();
            }
            else if(requestType == "timeOff") {
                dynamicHTML = '';
                $("#newRequestHTML").html(dynamicHTML);
                $("#timeOffRange").show();
            }
            else if(requestType != "timeOff") {
                $("#timeOffRange").hide();
            }

        });


    });
</script>